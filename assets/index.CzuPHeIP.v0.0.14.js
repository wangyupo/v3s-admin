import{$ as V,M as P,b as z,c as u,q as x,o as _,g as d,f as m,h as y,t as k,r as w,D as L,d as T,i as E,P as O,p as B,e as C,z as D,F as $,T as I,y as A,W as U}from"./index.D5ehgF_c.v0.0.14.js";import{s as G}from"./aExample.CPU12YKO.v0.0.14.js";function W(g,a){if(window.navigator.msSaveBlob)try{let t=new Blob([g],{type:"application/x-www-form-urlencoded"});window.navigator.msSaveBlob(t,a)}catch(t){console.log(t)}else{let t=document.createElement("a");t.href=window.URL.createObjectURL(new Blob([g])),t.target="_blank",t.download=a,document.body.appendChild(t),t.click(),document.body.removeChild(t)}P({type:"success",message:`“${a}” 导出成功！`})}function F({firstRow:g={},otherRow:a={},excelData:t={},fileName:o="数据导出"}){g={fontSize:12,fontBold:!0,backgroundColor:"#ffffff",...g},a={fontSize:12,fontBold:!1,backgroundColor:"#ffffff",...a},t={firstRow:[],contentRow:[],...t};const b=t.firstRow.filter(e=>e.prop&&e.prop!="operate").map(e=>e.label),h=t.contentRow.map(e=>{const s=[];return t.firstRow.forEach(l=>{const i=l.prop;i&&e.hasOwnProperty(i)&&s.push(e[i])}),s});let c=[b,...h],p=t.firstRow.map(()=>0);c.forEach((e,s)=>{p.forEach((l,i)=>{const S=/[\u4E00-\u9FA5]/g,v=(e[i]+"").match(S)&&(e[i]+"").match(S).length||0,N=(e[i]+"").length-v;let R=0;s===0?R=(g.fontBold?(v*2+N)*1.2:v*2+N)*(g.fontSize/10):R=(a.fontBold?(v*2+N)*1.2:v*2+N)*(a.fontSize/10),R>l&&(p[i]=R)})});const n=V.utils.aoa_to_sheet(c);n["!cols"]=p.map(e=>({wch:e})),Object.keys(n).forEach(e=>{if(!e.startsWith("!")){const s=(e+"").substring(1)==="1";n[e].s={font:{sz:s?g.fontSize:a.fontSize,bold:s?g.fontBold:a.fontBold},alignment:{horizontal:"left",vertical:"center"},fill:{fgColor:{rgb:s?g.backgroundColor.replace("#",""):a.backgroundColor.replace("#","")}},border:{top:{style:"thin",color:{rgb:"eeeeee"}},bottom:{style:"thin",color:{rgb:"eeeeee"}},left:{style:"thin",color:{rgb:"eeeeee"}},right:{style:"thin",color:{rgb:"eeeeee"}}}}}});const f=V.utils.book_new();V.utils.book_append_sheet(f,n,"Sheet1");const r=V.write(f,{bookType:"xlsx",type:"array"});W(r,o+".xlsx")}const M={__name:"tableBasic",setup(g){const a=z({showOverflowTooltip:!0,columns:[{label:"序号",type:"index"},{label:"日期",prop:"date",width:"150px"},{label:"姓名",prop:"name"},{label:"地址",prop:"address"}],data:[],pages:{total:100,pageNumber:1,pageSize:10}});return(t,o)=>{const b=u("el-link"),h=u("RhTable");return _(),x(h,{border:"",stripe:"","table-data":a},{name:d(({scope:c})=>[m(b,{type:"primary"},{default:d(()=>[y(k(c.row.name),1)]),_:2},1024)]),_:1},8,["table-data"])}}},Y={__name:"tableForm",setup(g){const a=w(!1),t=w({}),o=w([{type:"input",label:"姓名",placeholder:"请输入姓名",key:"name",defaultValue:"",colSpan:8},{type:"select",label:"地址",placeholder:"请选择地址",key:"address",defaultValue:"",options:G,colSpan:8},{type:"date",label:"日期",placeholder:"请选择日期",key:"date",defaultValue:"",colSpan:8},{type:"daterange",label:"日期范围",startPlaceholder:"开始日期",endPlaceholder:"结束日期",key:"time",startKey:"beginTime",endKey:"endTime",defaultValue:[],colSpan:8}]),b=(e,s)=>s!==1,h=w([]),c=z({showOverflowTooltip:!0,columns:[{type:"expand"},{type:"selection",selectable:b},{label:"序号",type:"index"},{label:"日期",prop:"date",width:"150px",diyHeader:!0,sortable:!0},{label:"姓名",prop:"name"},{label:"地址",prop:"address",prefix:"<span class='font-bold'>送货地址：</span>",suffix:"(not too spicy)"}],data:[{date:"15311665523",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom",address:"No. 189, Grove St, Los Angeles"}],pages:{total:0,pageNumber:1,pageSize:10}});L(()=>{});const p=e=>{console.log(e)},n=(e=1)=>{a.value=!0;const s=Object.assign({},t.value,{pageNumber:e||c.pages.pageNumber,pageSize:c.pages.pageSize});api(s).then(l=>{l.code===200&&(c.data=l.rows,c.pages.total=l.total,c.pages.pageNumber=s.pageNumber)}).finally(()=>{a.value=!1})},f=e=>{c.pages.pageSize=e,n(1)},r=e=>{h.value=e};return(e,s)=>{const l=u("RhSearch"),i=u("el-link"),S=u("RhTable");return _(),T("div",null,[m(l,{searchInfo:o.value,onSearch:p},null,8,["searchInfo"]),m(S,{border:"",stripe:"","table-data":c,loading:a.value,onPageChange:n,onPageSizeChange:f,onSelectionChange:r},{dateHeader:d(({scope:v})=>[y(k(v.column.label)+"Diy",1)]),expand:d(({scope:v})=>[y(k(v.row.date),1)]),name:d(({scope:v})=>[m(i,{type:"primary"},{default:d(()=>[y(k(v.row.name),1)]),_:2},1024)]),_:1},8,["table-data","loading"])])}}},j={__name:"tableWrapper",setup(g){const a=z({showOverflowTooltip:!0,columns:[{label:"序号",type:"index"},{label:"日期",prop:"date",width:"150px",sortable:!0},{label:"姓名",prop:"name"},{label:"地址",prop:"address"}],data:[{date:"2016-05-03",name:"",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom",address:"No. 189, Grove St, Los Angeles"}],pages:{total:100,pageNumber:1,pageSize:10}});return(t,o)=>{const b=u("el-input"),h=u("el-link"),c=u("RhTable"),p=u("RhWrapper");return _(),x(p,null,{"title-right":d(()=>[m(b,{placeholder:"请输入","suffix-icon":E(O)},null,8,["suffix-icon"])]),default:d(()=>[m(c,{border:"",stripe:"","table-data":a},{name:d(({scope:n})=>[m(h,{type:"primary"},{default:d(()=>[y(k(n.row.name),1)]),_:2},1024)]),_:1},8,["table-data"])]),_:1})}}},J={class:"flex"},H={class:"w-[300px] text-sm"},K={class:"flex items-center"},X={__name:"tableRowEdit",setup(g){const a=z({showOverflowTooltip:!0,columns:[{label:"序号",type:"index"},{label:"日期",prop:"date"},{label:"姓名",prop:"name"},{label:"地址",prop:"address"},{label:"操作",prop:"operate",width:"250px"}],data:[{date:"2016-05-03",name:"Joe",address:"No. 189, Grove St"}],pages:{total:100,pageNumber:1,pageSize:10}}),t=w(null),o=B(()=>a.data),b=p=>{t.value=null,a.data=p},h=(p,n)=>{p&&(a.data=p),a.data.splice(n+1,0,{date:"",name:"",address:""}),t.value=null},c=(p,n)=>{a.data=p,a.data.splice(n,1),t.value=null};return(p,n)=>{const f=u("el-button"),r=u("el-input"),e=u("RhTable"),s=u("RhWrapper");return _(),T("div",J,[C("div",H,[C("code",null,[C("pre",null,k(o.value),1)])]),m(s,{class:"flex-1"},{"title-right":d(()=>[a.data.length?D("",!0):(_(),x(f,{key:0,type:"primary",onClick:n[0]||(n[0]=l=>h())},{default:d(()=>n[1]||(n[1]=[y("新增")])),_:1})),m(f,{type:"primary",disabled:!a.data.length},{default:d(()=>n[2]||(n[2]=[y("保存")])),_:1},8,["disabled"])]),default:d(()=>[m(e,{border:"",stripe:"","table-data":a},{date:d(({scope:l})=>[t.value==l.$index?(_(),x(r,{key:0,modelValue:l.row.date,"onUpdate:modelValue":i=>l.row.date=i,placeholder:"Please input date"},null,8,["modelValue","onUpdate:modelValue"])):(_(),T($,{key:1},[y(k(l.row.date),1)],64))]),name:d(({scope:l})=>[t.value==l.$index?(_(),x(r,{key:0,modelValue:l.row.name,"onUpdate:modelValue":i=>l.row.name=i,placeholder:"Please input name"},null,8,["modelValue","onUpdate:modelValue"])):(_(),T($,{key:1},[y(k(l.row.name),1)],64))]),address:d(({scope:l})=>[t.value==l.$index?(_(),x(r,{key:0,modelValue:l.row.address,"onUpdate:modelValue":i=>l.row.address=i,placeholder:"Please input address"},null,8,["modelValue","onUpdate:modelValue"])):(_(),T($,{key:1},[y(k(l.row.address),1)],64))]),operate:d(({scope:l,tableData:i})=>[C("div",K,[t.value==null?(_(),x(f,{key:0,type:"primary",onClick:()=>t.value=l.$index},{default:d(()=>n[3]||(n[3]=[y(" 编辑 ")])),_:2},1032,["onClick"])):t.value==l.$index?(_(),x(f,{key:1,type:"primary",onClick:S=>b(i)},{default:d(()=>n[4]||(n[4]=[y(" 保存 ")])),_:2},1032,["onClick"])):D("",!0),m(f,{icon:"Plus",circle:"",title:"添加行",onClick:S=>h(i,l.$index)},null,8,["onClick"]),m(f,{icon:"Minus",circle:"",title:"删除行",onClick:S=>c(i,l.$index)},null,8,["onClick"])])]),_:1},8,["table-data"])]),_:1})])}}},q={class:"flex justify-end mb-3"},Q={__name:"tableColumnsDIY",setup(g){const a=w({}),t=w([{type:"input",label:"姓名",placeholder:"请输入姓名",key:"name",defaultValue:"",colSpan:8},{type:"select",label:"日期",placeholder:"请选择日期",key:"select",defaultValue:"",options:[{value:"1",label:"选项一"},{value:"2",label:"选项二"}],colSpan:8}]),o=z({showOverflowTooltip:!0,columns:[{label:"序号",type:"index"},{label:"日期",prop:"date",minWidth:"120px",show:!0},{label:"姓名",prop:"name",width:"120px",show:!0},{label:"操作",prop:"operate",width:"200px",show:!0}],data:[{date:"2016-05-03",name:"tableColumnsDIY 示例数据"}],pages:{total:0,pageNumber:1,pageSize:10}}),b=w(!1);L(()=>{});const h=r=>{a.value=r,c(1)},c=(r=1)=>{b.value=!0;const e=Object.assign({pageNumber:r||o.pages.pageNumber,pageSize:o.pages.pageSize},a.value);getList(e).then(s=>{s.code==200&&(o.data=s.rows,o.pages.total=s.total,o.pages.pageNumber=e.pageNumber)}).finally(()=>{b.value=!1})},p=r=>{o.pages.pageSize=r,c(1)},n=r=>{const e=o.columns.findLastIndex(l=>l.type),s=o.columns.slice(0,e+1);o.columns=s.concat(r)},f=()=>{F({excelData:{firstRow:I(o.columns).slice(1,3),contentRow:I(o.data)},fileName:"Excel示例"})};return(r,e)=>{const s=u("RhSearch"),l=u("el-button"),i=u("RhTableColumnDIY"),S=u("RhTable");return _(),T("div",null,[m(s,{searchInfo:t.value,onSearch:h},null,8,["searchInfo"]),C("div",q,[m(l,{type:"default",icon:"Download",circle:"",class:"mr-3",onClick:f}),m(i,{columns:o.columns,onUpdateColumns:n},null,8,["columns"])]),m(S,{border:"",stripe:"",loading:b.value,"table-data":o,onPageChange:c,onPageSizeChange:p},{operate:d(({scope:v})=>[m(l,{type:"primary",link:""},{default:d(()=>e[0]||(e[0]=[y("操作")])),_:1})]),_:1},8,["loading","table-data"])])}}},Z={class:"flex"},ee={class:"w-[300px] text-sm"},ae={class:"flex-1"},te={__name:"tableDragRow",setup(g){const a=w({}),t=w([{type:"input",label:"姓名",placeholder:"请输入姓名",key:"input",value:"",colSpan:8},{type:"select",label:"状态",placeholder:"请选择状态",key:"select",value:"",options:[{value:"1",label:"选项一"},{value:"2",label:"选项二"}],colSpan:8}]),o=z({showOverflowTooltip:!0,draggable:!0,columns:[{label:"序号",type:"index"},{label:"日期",prop:"date",minWidth:"120px"},{label:"姓名",prop:"name"},{label:"操作",prop:"operate",width:"200px"}],data:[{date:"2016-05-01",name:"home 示例数据1"},{date:"2016-05-02",name:"home 示例数据2"},{date:"2016-05-03",name:"home 示例数据3"}],pages:{total:0,pageNumber:1,pageSize:10}}),b=w(!1),h=B(()=>o.data);L(()=>{});const c=r=>{a.value=r,p(1)},p=(r=1)=>{b.value=!0;const e=Object.assign({pageNumber:r||o.pages.pageNumber,pageSize:o.pages.pageSize},a.value);getList(e).then(s=>{s.code==200&&(o.data=s.rows,o.pages.total=s.total,o.pages.pageNumber=e.pageNumber)}).finally(()=>{b.value=!1})},n=r=>{o.pages.pageSize=r,p(1)},f=r=>{o.data=r};return(r,e)=>{const s=u("RhSearch"),l=u("el-button"),i=u("RhTable");return _(),T("div",Z,[C("div",ee,[C("code",null,[C("pre",null,k(h.value),1)])]),C("div",ae,[m(s,{searchInfo:t.value,onSearch:c},null,8,["searchInfo"]),m(i,{border:"",stripe:"","row-key":"date",loading:b.value,"table-data":o,onDragEnd:f,onPageChange:p,onPageSizeChange:n},{operate:d(({scope:S})=>[m(l,{type:"primary",link:""},{default:d(()=>e[0]||(e[0]=[y("操作")])),_:1})]),_:1},8,["loading","table-data"])])])}}},ne={__name:"index",setup(g){const a=w(0),t=[{label:"基础样式",component:M},{label:"搜索样式",component:Y},{label:"线框样式",component:j},{label:"列字段配置（排序、显示/隐藏）",component:Q},{label:"行编辑",component:X},{label:"行拖拽（必须设置row-key，且保证是唯一不重复的）",component:te}];return(o,b)=>{const h=u("el-tab-pane"),c=u("el-tabs");return _(),x(c,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=p=>a.value=p),class:"demo-tabs"},{default:d(()=>[(_(),T($,null,A(t,(p,n)=>m(h,{label:p.label,name:n,key:n},{default:d(()=>[(_(),x(U(p.component)))]),_:2},1032,["label","name"])),64))]),_:1},8,["modelValue"])}}};export{ne as default};
